"use strict";(function(){var i="toast-bottom-right",r="icheckbox_minimal-red",u="/Stml/GetUserPermissions",t={input:{activate:function(n){n=n||$("body");n.find(".form-control").focus(function(){$(this).parent().addClass("focused")});n.find(".form-control").focusout(function(){var n=$(this);n.parents(".form-group").hasClass("form-float")?n.val()==""&&n.parents(".form-line").removeClass("focused"):n.parents(".form-line").removeClass("focused")});n.on("click",".form-float .form-line .form-label",function(){$(this).parent().find("input").focus()});n.find(".form-control").each(function(){$(this).val()!==""&&$(this).parents(".form-line").addClass("focused")})}},select:{activate:function(){$.fn.selectpicker&&$("select:not(.ms)").selectpicker()}}},n;window.user={check:function(n){return localStorage.permissions!=null&&JSON.parse(localStorage.permissions).indexOf(n)>0}};n={setDefaultToastrOptions:function(){toastr.options.positionClass=i},setDefaultAjaxErrorEvent:function(){$(document).ajaxError(function(){toastr.error("抱歉！服务端发生了未知的错误","错误")})},setDefaultModalShownEvent:function(){$('.modal[role="dialog"]').on("shown.bs.modal",function(){t.input.activate($(this).find("form"));$(this).find("input:not([type=hidden]):first").focus();$('input[type="checkbox"]').iCheck({checkboxClass:r});$.validator.unobtrusive.parse($(this).find("form"))})},loadPermissions:function(){$.get(u,function(n){localStorage.permissions=JSON.stringify(n)})}};n.setDefaultToastrOptions();n.setDefaultAjaxErrorEvent();n.setDefaultModalShownEvent();n.loadPermissions();t.input.activate();t.select.activate()})();