function createUserSuccess(n){n.isSuccess?(swal("成功!","新建用户成功","success"),$("#create-modal").modal("hide"),$("#table").bootstrapTable("refresh",{pageNumber:1})):swal("失败！",n.errors[0],"error")}function editUserSuccess(n){n.isSuccess?(swal("成功!","编辑用户成功","success"),$("#edit-modal").modal("hide"),$("#table").bootstrapTable("refresh",{pageNumber:1})):swal("失败！",n.errors[0],"error")}(function(){"use strict";$(function(){var t=$("#table"),u=$("#create"),i=$("#create-modal"),r=$("#edit-modal"),f="/User/CreatePartial",e="/User/EditPartial",o="/User/Delete",s={classes:"table",method:"get",url:"/User/List",columns:[{field:"userName",title:"用户名"},{field:"role",title:"角色",formatter:function(n,t){return t.roles.length===0?"-":t.roles.map(function(n){return'<span class="badge badge-success">'+n.displayName+"<\/span>"}).join(" ")}},{field:"email",title:"邮箱"},{field:"creation",title:"创建日期",formatter:function(n,t){return"<div>"+t.dateOfCreation+'<\/div><div class="small text-muted">'+t.timeOfCreation+"<\/div>"}},{field:"state",title:"是否启用",formatter:function(n,t){return'<div class="state icheckbox_minimal-red'+(t.isActive?" checked":"")+'"><\/div>'}},{field:"operate",title:"操作",width:"100px","class":"dropdown",formatter:function(){var n=[];return(window.user.check("UserEdit")||window.user.check("UserDelete"))&&(n.push('<a href="#" class="btn text-primary" data-toggle="dropdown" data-boundary="viewport" aria-haspopup="true" aria-expanded="false">'),n.push('<i class="fa fa-bars font-lg"><\/i>'),n.push("<\/a>"),n.push('<div class="dropdown-menu pull-right">'),window.user.check("UserEdit")&&n.push('<a class="dropdown-item edit"><i class="fa fa-pencil"><\/i> 编辑<\/a>'),window.user.check("UserDelete")&&n.push('<a class="dropdown-item delete"><i class="fa fa-trash"><\/i> 删除<\/a>'),n.push("<\/div>")),n.join("")},events:{"click .edit":function(t,i,r){n.edit(r.id)},"click .delete":function(t,i,r){n.delete(r.id)}}}],uniqueId:"Id",locale:"zh-CN",search:!0,searchAlign:"left",searchOnEnterKey:!0,pagination:!0,paginationLoop:!1,pageNumber:1,pageSize:5,pageList:[10,25,50],sidePagination:"server",queryParams:function(n){return n},responseHandler:function(n){return{total:n.total,rows:n.rows}}},n={initTable:function(){t.bootstrapTable("destroy").bootstrapTable(s)},create:function(){i.find(".modal-content").load(f,function(){i.modal("show")})},edit:function(n){r.find(".modal-content").load(e+"?id="+n,function(){r.modal("show")})},"delete":function(n){swal({title:"确定执行该操作?",icon:"warning",buttons:["取消","确定"],dangerMode:!0}).then(i=>{i&&$.post(o,{id:n},function(){swal("成功!","删除用户成功","success");t.bootstrapTable("refresh",{pageNumber:1})})})}};u.click(function(){n.create()});n.initTable()})})();