"use strict";var $table=$("#tb-users"),$createModal=$("#create-modal"),$createForm=$("#userCreateForm")[0],TABLE_OPTIONS_CLASS="table table-hover",TABLE_OPTIONS_METHOD="get",TABLE_OPTIONS_URL="/User/List",TABLE_OPTIONS_UNIQUEID="Id",TABLE_OPTIONS_SEARCH=!0,TABLE_OPTIONS_SEARCH_ALIGN="left",TABLE_OPTIONS_PAGINATION=!0,TABLE_OPTIONS_PAGENUMBER=1,TABLE_OPTIONS_PAGESIZE=5,TABLE_OPTIONS_PAGELIST=[10,25,50],TABLE_OPTIONS_SIDE_PAGINATION="server",USER_DELETE_URL="/User/Delete",$tableOptions={classes:TABLE_OPTIONS_CLASS,method:TABLE_OPTIONS_METHOD,url:TABLE_OPTIONS_URL,columns:[{field:"userName",title:"用户名"},{field:"email",title:"邮箱"},{field:"creation",title:"创建日期",formatter:function(n,t){return"<div>"+t.dateOfCreation+'<\/div><div class="small text-muted">'+t.timeOfCreation+"<\/div>"}},{field:"state",title:"状态",formatter:function(n,t){return'<div class="state icheckbox_minimal-red'+(t.isEnable?" checked":"")+'"><\/div>'}},{field:"operate",title:"操作",width:"100px",formatter:function(n,t){var i='<div class="dropdown">';return i+='<a href="#" class="btn text-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-bars font-lg"><\/i><\/a>',i+='<div class="dropdown-menu">',i+='<a class="dropdown-item" href="#"><i class="fa fa-pencil"><\/i> 编辑<\/a>',i+='<a class="dropdown-item" href="javascript:funcs.delete(\''+t.id+'\')"><i class="fa fa-trash"><\/i> 删除<\/a>',i+"<\/div><\/div>"}}],uniqueId:TABLE_OPTIONS_UNIQUEID,search:TABLE_OPTIONS_SEARCH,searchAlign:TABLE_OPTIONS_SEARCH_ALIGN,pagination:TABLE_OPTIONS_PAGINATION,pageNumber:TABLE_OPTIONS_PAGENUMBER,pageSize:TABLE_OPTIONS_PAGESIZE,pageList:TABLE_OPTIONS_PAGELIST,sidePagination:TABLE_OPTIONS_SIDE_PAGINATION,queryParams:function(n){return n},responseHandler:function(n){return{total:n.total,rows:n.rows}}},funcs={initTable:function(){$table.bootstrapTable("destroy").bootstrapTable($tableOptions)},initiCheck:function(){$('input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_minimal-red"})},createAjaxResponse:{success:function(n){n.isSuccess?(toastr.success("新建用户成功！"),$createModal.modal("hide"),$table.bootstrapTable("refresh",{pageNumber:1})):toastr.error("新建用户失败： "+n.errors[0])}},createModalOpen:function(){$createForm.reset()},"delete":function(n){$.post(USER_DELETE_URL,{id:n},function(){toastr.success("删除用户成功!");$table.bootstrapTable("refresh",{pageNumber:1})})}};$(function(){funcs.initTable();funcs.initiCheck();$createModal.on("hidden.bs.modal",function(n){funcs.createModalOpen(n)})});