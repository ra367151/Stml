function createRoleSuccess(n){n.isSuccess?(toastr.success("新建角色成功！"),$("#create-modal").modal("hide"),$("#tb-roles").bootstrapTable("refresh",{pageNumber:1})):toastr.error("新建角色失败： "+n.errors[0])}function editRoleSuccess(n){n.isSuccess?(toastr.success("编辑角色成功！"),$("#edit-modal").modal("hide"),$("#tb-roles").bootstrapTable("refresh",{pageNumber:1})):toastr.error("编辑角色失败： "+n.errors[0])}(function(){"use strict";$(function(){var t=$("#tb-roles"),i="#edit-modal",r=$("#create-modal"),u=$(i),f="/Role/CreatePartial",e="/Role/EditPartial",o="/Role/Delete",s={classes:"table",method:"get",url:"/Role/List",columns:[{field:"name",title:"角色"},{field:"displayName",title:"显示名称"},{field:"operate",title:"操作",width:"100px",formatter:function(n,t){var r='<div class="dropdown">';return(window.user.check("RoleEdit")||window.user.check("RoleDelete"))&&(r+='<a href="#" class="btn text-primary" data-toggle="dropdown" data-boundary="viewport" aria-haspopup="true" aria-expanded="false"><i class="fa fa-bars font-lg"><\/i><\/a>',r+='<div class="dropdown-menu pull-right">',window.user.check("RoleEdit")&&(r+='<a class="dropdown-item edit-role" data-role-id="'+t.id+'" data-toggle="modal" data-target="'+i+'"><i class="fa fa-pencil"><\/i> 编辑<\/a>'),window.user.check("RoleDelete")&&(r+='<a class="dropdown-item delete-role" data-role-id="'+t.id+'"><i class="fa fa-trash"><\/i> 删除<\/a>'),r+="<\/div><\/div>"),r}}],uniqueId:"Id",locale:"zh-CN",search:!0,searchAlign:"left",searchOnEnterKey:!0,pagination:!0,paginationLoop:!1,pageNumber:1,pageSize:5,pageList:[10,25,50],sidePagination:"server",queryParams:function(n){return n},responseHandler:function(n){return{total:n.total,rows:n.rows}}},n={initTable:function(){t.bootstrapTable("destroy").bootstrapTable(s)},create:function(){r.find(".modal-content").load(f,function(){r.modal("show")})},edit:function(n){$.get(e,{id:n},function(n){u.find(".modal-content").html(n)})},"delete":function(n){$.post(o,{id:n},function(){toastr.success("删除角色成功!");t.bootstrapTable("refresh",{pageNumber:1})})}};$(".create-role").click(function(){n.create()});$(document).on("click",".edit-role",function(){var t=$(this).data("role-id");n.edit(t)});$(document).on("click",".delete-role",function(){var t=$(this).data("role-id");n.delete(t)});n.initTable()})})();